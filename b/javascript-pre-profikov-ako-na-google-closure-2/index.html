<!DOCTYPE html><html><head>


    <meta charset="utf-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <title>FRONT-END SK</title>

    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="Nepravideľný magazín o Slovenskom front-end svete, developeroch, designer a startupoch." />

    <link rel="shortcut icon" href="favicon.ico?1" type="image/x-icon" />
    <link rel="icon" href="favicon.ico?1" type="image/x-icon" />

    <meta property="og:title" content="Front-End.sk" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://secure.gravatar.com/avatar/33601a529921d030cc933647845983d1?size=400"/>
    <meta property="og:url" content="https://frontend.sk" />
    <meta property="og:description" content="Nepravideľný magazín o Slovenskom front-end svete, developeroch, designer a startupoch." />

    <meta name="twitter:title" content="Front-End.sk" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:image" content="https://secure.gravatar.com/avatar/33601a529921d030cc933647845983d1?size=400" />
    <meta name="twitter:url" content="http://frontend.sk" />
    <meta name="twitter:description" content="Nepravideľný magazín o Slovenskom front-end svete, developeroch, designer a startupoch." />

    <link href="/assets/styles.css" rel="stylesheet" type="text/css" />


</head><body>

    <aside id="logo"><a href="https://ondrek.com/blog/">O</a></aside>

    <main>
    


    <h1><a href="">Javascript pre profíkov - Ako na Google Closure (2/4)</a></h1>
    <time>2014-07-04</time>

    <article>
        <p>A je tu pokračovanie najčítanejšieho (a teda jediného) seriálu v slovenčine o Closure! Tento
diel bude stručným vysvetlením prototype štruktúry a jedhoduchého introduction do architektúry.</p>
<!-- more -->
<hr>
<p><strong>OOP prístup a DOM manipulácia</strong></p>
<p>Vytvorme si pomocnú classu pre DOM manipuláciu, ktorú budeme používať vždy, keď potrebujeme pracovať
s akýmkoľvek elementom skrz celou aplikáciou a zazvyme tento boilerplate Sprite v našom objekte <code>lib</code>
v ktorom máme viacero užitočných utilít.</p>
<p>Sprite bude mať ako prvý parameter element: čo môže byť string ako &quot;div&quot;, &quot;section&quot; alebo iný validný
názov tagu, avšak bude akceptovať aj samotné Element, Node a Window... alebo bude prázdny a vráti tým
pádom DIV:</p>
<pre><code>goog.provide(&quot;lib.Sprite&quot;);
goog.require(&quot;goog.events.EventTarget&quot;);
goog.require(&quot;goog.dom&quot;);

lib.Sprite = function(element, properties, content){

    properties = properties || {};

    if (!element || goog.typeOf(element)===&quot;string&quot;){
        element = element || &quot;div&quot;;
        element = goog.dom.createDom(element, properties);
    } else {
        goog.dom.setProperties(element, properties);
    }

    // môžeme potrebovať neskôr
    this.element = element;

    goog.base(this);

};

// vysvetlené neskôr v texte
goog.inherits(lib.Sprite, goog.events.EventTarget);
</code></pre><p>Tento začiatok classy ma viacero výhod. Nielen že môžeme pridávať na prototype v budúcnosti mutator
methods (rozšíriť o custom settre a gettre pre špecifické funkcionality), podedili sme funkcinalitu
<code>EventTarget</code> z Closure knižnice, ale aj jednoducho vytvoríme nový DOM element s custom properties
a contentom.</p>
<pre><code>new lib.Sprite();
// vytvorí DIV classu obohatenú o EventTarget

new lib.Sprite(&quot;span&quot;, {}, &quot;hello world&quot;);
// vytvorí SPAN element s custom textom

new lib.Sprite(&quot;h1&quot;, { id : &quot;title&quot; });
// vytvorí nadpis s custom IDčkom, id
</code></pre><p>Do druhého parametra properties môžeme vložiť style, class, for, id, alebo aj zastaralé html tagy ako
cellpadding, width a mnohé iné. Tretí parameter samozrejme akceptuje obsah, ktorý môžeme urobiť aj
ako innerHTML nad elementom.</p>
<hr>
<p><strong>WTF je EventTarget</strong></p>
<p>Táto classa nám pridá kompletný support pre capture/bubble funcionalitu, stop event propagation
a prevent default. Rovnako aj metódy ako <code>listenOnce</code>, <code>unlistenByKey</code>, <code>getListeners</code> a ďalšie,
ktoré si môžete nájsť v Closure dokumentácií, takže môžete z fleku použíť:</p>
<pre><code>var mojDiv = new lib.Sprite();

mojDiv.listenOnce(&quot;click&quot;, function(){
    console.log(&quot;skús kliknúť druhýkráť&quot;);
});
</code></pre><p>Samozrejme, toto nie je povinné. Je to len skvelý príklad zdedenia funkcionality eventov na DOM elementy,
tam kde je potrebná a bude naozaj všade kompatibilná.</p>
<hr>
<p><strong>Rozšírenie prototypu našej lib.Sprite</strong></p>
<p>Pravdepodobne budeme chcieť aj nejaké custom metódy ako <code>setContent</code>, <code>getAttributes</code>, <code>setAttributes</code>,
<code>setPrefixedStyle</code>, <code>addChildren</code>, <code>addClasses</code> a podobné, ktoré budeme mať ako funcie na prototype,
takže v budúcnosť ich môžeme rozšíriť bez toho aby sme si rozbili už existujúcu funkcionalitu ;)</p>
<p>Ak sme však dostatočne kreatívni, môžeme si vytvoriť napríklad classy na validáciu, maximálne počty inputov,
analytics uživateľského správania, hashovanie pri vytvorení type=password inputu a podobne..</p>
<pre><code>// podobne samozrejme môžeme vytvoriť getContent, hasContent, ..
lib.Sprite.prototype.setContent = function(content){
    this.element.innerHTML = content;
};

// podobne môžeme vytvoriť setA, hasA, alebo takzvané data-atribúty
lib.Sprite.prototype.getAttribute = function(attributeName){
    return this.element.getAttribute(attributeName);
};

// kde ako styleRule môže isť object viacerých atribútov vďaka Closure
lib.Sprite.prototype.setStyle = function(styleRule, value){
    goog.style.setStyle(this.element, styleRule, value);
};
</code></pre><hr>
<p><strong>Používanie Sprite v praxi</strong></p>
<p>Vytvorme si nový file ktorý bude requirovať:</p>
<pre><code>// provide name nemusí byť totožné s menom funkcie
// je však dobré mať minimálne hierarchické mená, ktoré si pamätáme
goog.require(&quot;lib.Sprite&quot;);
</code></pre><p>Povedzme, že sme si implementovali všetky metódy, ktoré sme potrebovali a ktoré súvisia priamo
s našou appkou. Použitie môže vyzerať nasledovne:</p>
<pre><code>var buttonGroup = new lib.Sprite(&quot;form&quot;);
var saveButton = new lib.Sprite(&quot;button&quot;, {}, &quot;Save form&quot;);
buttonGroup.addChild(saveButton);


saveButton.addClass(&quot;active&quot;);

saveButton.on(&quot;clicked&quot;, function(){
    saveButton.removeClass(&quot;active&quot;);
    saveButton.removeFromDom();
});
</code></pre><p>Alebo že chceme vytvoriť špeciálny typ inputov, ktorý bude mať vlastné validácie, odosielať sa priebežne
na server a ukladať do cookies:</p>
<pre><code>goog.provide(&quot;lib.FormInputs&quot;);
goog.require(&quot;lib.Sprite&quot;);

lib.FormInputs = function(...){};

// pridá validácie pre menu
lib.prototype.currencyValidation = function(...){};

// zväčší každé prvé písmeno slova na Capital
lib.prototype.capitalize = function(...){};

// vrátí true, iba ak input text je končí špecifickým slovom
lib.prototype.endsWith = function(...){};

goog.inherits(lib.FormInputs, lib.Sprite);
</code></pre><p>...</p>
<hr>
<p>Všetok tento kód je písaný vrámci ľahšieho pochopenia, takže samozrejme nefunguje na prvýkrát a nemôžete
ho len pastnúť do konzoly. Je naozaj jednoduchšie napísať tri bodky namiesto parametrov, pretože to šetrí
čas a rozšíri predstavivosť..</p>

    </article>



    </main>


    <footer id="footer">

        <a target="_blank" rel="nofollow" href="#">chcete písať?</a>,
        <a target="_blank" rel="nofollow" href="#">o autoroch</a>,
        <a target="_blank" rel="nofollow" href="#">pre média</a>,
        <a target="_blank" rel="nofollow" href="https://github.com/frontendsk/frontendsk.github.io">git repo</a>,
        <a target="_blank" rel="nofollow" href="/humans.txt">humans.txt</a>,
        <a target="_blank" rel="nofollow" href="#">a11y manifest</a>

        <br/>

        &copy; 2015
        theme designed &amp; handcrafted by samuel ondrek ;o)<br/>


    </footer>


</body></html>

</body></html>